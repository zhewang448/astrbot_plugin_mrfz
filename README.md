# 明日方舟角色语音插件 astrbot_plugin_mrfz

## v3.3.5

这是一个支持明日方舟所有角色所有语言语音的 AstrBot 插件。

## 访问统计

## <a href="https://count.getloli.com/"><img src="https://count.getloli.com/get/@:astrbot_plugin_mrfz?theme=rule34"></a>

## 功能特点

- 支持自动下载角色语音
- 支持中文 日语 方言 三语音
- 支持随机播放语音
- 智能语音文件管理
- 配置通过 Schema 系统管理

## 指令说明

| 指令                             | 别名                               | 功能说明                                                                                                                                                                                                                                                                            |
| -------------------------------- | ---------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/mrfz [角色名] [语音名] [语言]` | `明日方舟语音`, `方舟语音`         | 播放指定角色的特定语音。若不指定 `[语音名]`，则随机播放该角色的一句语音。若不指定 `[语言]`，则按配置优先级（默认：方言(`fy`) -> 汉语(`cn`) -> 日语(`jp`) -> 英语(`us`) -> 韩语(`kr`) -> 意大利语(`it`)）自动选择可用语言播放。若不指定 `[角色名]`，则随机播放一个已下载角色的语音。 |
| `/mrfz_list`                     | `明日方舟语音列表`, `方舟语音列表` | 生成并显示当前已下载语音的干员列表、支持的语音类型以及各干员已下载的语音语言。                                                                                                                                                                                                      |
| `/mrfz_fetch [角色名]`           | `明日方舟下载语音`, `方舟下载语音` | 尝试从 PRTS Wiki 下载指定干员的所有语音文件。插件将根据配置自动下载普通语音和皮肤语音，并更新本地缓存。                                                                                                                                                                             |
| `/mrfz_help`                     | `明日方舟语音帮助`, `方舟语音帮助` | 显示本插件的帮助信息。                                                                                                                                                                                                                                                              |

## 配置项

- `auto_download`: 是否自动下载未找到的角色语音（默认：true）
- `auto_download_skin`: 是否自动下载角色的皮肤语音（默认：true）
- `default_language_rank`: 语言优先级设置（如 123，1:方言, 2:汉语, 3:日语, 4:英语, 5:韩语, 6:意大利语）
- `auto_download_language`: 设置需要自动下载的语言
- ~~`enable_log_output`: 是否启用详细日志输出（默认：false）~~

## 目录结构

```
voices/
  干员名/
    jp/
    cn/
    fy/
    skin/
      jp/
      cn/
      fy/
```

## 许可证

MIT

## 更新日志:

### v3.3.5

- 使用框架 logger，减少了部分 logger 输出，移除了 enable_log_output 配置项
- 加入部分指令中文别名，详见指令说明
- 加入 mrfz_help 指令，显示帮助信息

### v3.3.3

- 重构代码，极大提升运行效率
- 加入了英语 韩语 意大利语语音，实现了支持全语言
- 可单独配置语言自动下载配置
- 优化日志输出
- 修复无异常报错日志

### v3.1.0

- 增添日志输出等级配置

### v3.0.0

- 优化 mrfz_list 的图片，更加清晰美观
- 增加获取干员头像的功能
- 添加对物理文件但未索引情况的处理，自动重新扫描
- 增强日志输出，便于问题排查
- 优化文件下载逻辑，避免重复下载已存在的文件

### v2.0.0

- 优化皮肤 ID 自动识别，支持所有皮肤 ID 格式
- 皮肤语音与普通语音分目录存储
- 下载统计更准确，支持失败数统计
- 新增`auto_download_skin`配置项
- 代码结构优化，提升健壮性

### v1.6.0 及更早

- 支持明日方舟干员语音下载与播放
- 支持多语言
- 支持自动下载

## 注意事项

1. 语音文件来自 PRTS Wiki，请遵守相关使用规则
2. 下载过程中请保持网络连接稳定
3. 语音文件会占用一定磁盘空间，请确保有足够存储空间
   若想删除可以在 AstrBot\data\plugin_data\astrbot_plugin_mrfz\voices 目录中手动删除，并在之后重载插件

## ⭐ Stars

> [!TIP]
> 如果本项目对您的生活 / 工作产生了帮助，或者您关注本项目的未来发展，请给项目 Star，这是我维护这个开源项目的动力 <3>
